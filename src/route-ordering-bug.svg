<svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="bgGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1e3a8a;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#312e81;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="errorGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#dc2626;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#991b1b;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="successGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#10b981;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#059669;stop-opacity:1" />
    </linearGradient>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="600" fill="url(#bgGradient)"/>
  
  <!-- Title -->
  <text x="400" y="40" font-family="Arial, sans-serif" font-size="28" font-weight="bold" fill="#ffffff" text-anchor="middle">
    Route Ordering Bug: Before &amp; After
  </text>
  
  <!-- Dividing line -->
  <line x1="400" y1="70" x2="400" y2="570" stroke="#64748b" stroke-width="2" stroke-dasharray="5,5"/>
  
  <!-- BEFORE Section -->
  <text x="200" y="90" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#ef4444" text-anchor="middle">
    âŒ BEFORE (Broken)
  </text>
  
  <!-- Route boxes - BEFORE -->
  <g id="before-routes">
    <!-- Route 1 - The problematic one -->
    <rect x="50" y="110" width="300" height="60" rx="8" fill="#dc2626" opacity="0.9"/>
    <text x="200" y="135" font-family="monospace" font-size="13" fill="#ffffff" text-anchor="middle" font-weight="bold">
      /users/me/{email}
    </text>
    <text x="200" y="155" font-family="Arial, sans-serif" font-size="11" fill="#fecaca" text-anchor="middle">
      Catches EVERYTHING!
    </text>
    
    <!-- Route 2 -->
    <rect x="50" y="185" width="300" height="50" rx="8" fill="#475569" opacity="0.6"/>
    <text x="200" y="215" font-family="monospace" font-size="13" fill="#cbd5e1" text-anchor="middle" text-decoration="line-through">
      /users/me/change-password
    </text>
    
    <!-- Route 3 -->
    <rect x="50" y="250" width="300" height="50" rx="8" fill="#475569" opacity="0.6"/>
    <text x="200" y="280" font-family="monospace" font-size="13" fill="#cbd5e1" text-anchor="middle" text-decoration="line-through">
      /users/me/deactivate
    </text>
  </g>
  
  <!-- Request flow - BEFORE -->
  <g id="before-flow">
    <rect x="50" y="330" width="300" height="50" rx="8" fill="#1e293b" stroke="#3b82f6" stroke-width="2"/>
    <text x="200" y="360" font-family="monospace" font-size="12" fill="#60a5fa" text-anchor="middle">
      PATCH /users/me/change-password
    </text>
    
    <!-- Arrow -->
    <path d="M 200 385 L 200 410" stroke="#f59e0b" stroke-width="3" fill="none" marker-end="url(#arrowhead-warning)"/>
    
    <rect x="50" y="415" width="300" height="60" rx="8" fill="url(#errorGradient)"/>
    <text x="200" y="440" font-family="Arial, sans-serif" font-size="14" fill="#ffffff" text-anchor="middle" font-weight="bold">
      âš ï¸ Matches Route 1
    </text>
    <text x="200" y="460" font-family="monospace" font-size="11" fill="#fecaca" text-anchor="middle">
      email = "change-password"
    </text>
    
    <!-- Error message -->
    <rect x="50" y="490" width="300" height="50" rx="8" fill="#7f1d1d"/>
    <text x="200" y="520" font-family="Arial, sans-serif" font-size="13" fill="#fca5a5" text-anchor="middle">
      ğŸ’¥ User not found!
    </text>
  </g>
  
  <!-- AFTER Section -->
  <text x="600" y="90" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#10b981" text-anchor="middle">
    âœ… AFTER (Fixed)
  </text>
  
  <!-- Route boxes - AFTER -->
  <g id="after-routes">
    <!-- Route 1 - Specific routes first -->
    <rect x="450" y="110" width="300" height="50" rx="8" fill="#059669"/>
    <text x="600" y="140" font-family="monospace" font-size="13" fill="#ffffff" text-anchor="middle">
      /users/me/change-password
    </text>
    
    <!-- Route 2 -->
    <rect x="450" y="175" width="300" height="50" rx="8" fill="#059669"/>
    <text x="600" y="205" font-family="monospace" font-size="13" fill="#ffffff" text-anchor="middle">
      /users/me/deactivate
    </text>
    
    <!-- Route 3 - Generic route last -->
    <rect x="450" y="240" width="300" height="60" rx="8" fill="#3b82f6" opacity="0.8"/>
    <text x="600" y="265" font-family="monospace" font-size="13" fill="#ffffff" text-anchor="middle">
      /users/email/{email}
    </text>
    <text x="600" y="285" font-family="Arial, sans-serif" font-size="11" fill="#dbeafe" text-anchor="middle">
      Generic route (last)
    </text>
  </g>
  
  <!-- Request flow - AFTER -->
  <g id="after-flow">
    <rect x="450" y="330" width="300" height="50" rx="8" fill="#1e293b" stroke="#3b82f6" stroke-width="2"/>
    <text x="600" y="360" font-family="monospace" font-size="12" fill="#60a5fa" text-anchor="middle">
      PATCH /users/me/change-password
    </text>
    
    <!-- Arrow -->
    <path d="M 600 385 L 600 410" stroke="#10b981" stroke-width="3" fill="none" marker-end="url(#arrowhead-success)"/>
    
    <rect x="450" y="415" width="300" height="60" rx="8" fill="url(#successGradient)"/>
    <text x="600" y="440" font-family="Arial, sans-serif" font-size="14" fill="#ffffff" text-anchor="middle" font-weight="bold">
      âœ“ Matches Route 1
    </text>
    <text x="600" y="460" font-family="Arial, sans-serif" font-size="11" fill="#d1fae5" text-anchor="middle">
      Correct route executed!
    </text>
    
    <!-- Success message -->
    <rect x="450" y="490" width="300" height="50" rx="8" fill="#065f46"/>
    <text x="600" y="520" font-family="Arial, sans-serif" font-size="13" fill="#6ee7b7" text-anchor="middle">
      ğŸ‰ Password changed successfully
    </text>
  </g>
  
  <!-- Arrow markers -->
  <defs>
    <marker id="arrowhead-warning" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
      <polygon points="0 0, 10 5, 0 10" fill="#f59e0b"/>
    </marker>
    <marker id="arrowhead-success" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
      <polygon points="0 0, 10 5, 0 10" fill="#10b981"/>
    </marker>
  </defs>
  
  <!-- Key Lesson Box -->
  <rect x="50" y="555" width="700" height="35" rx="6" fill="#1e293b" stroke="#3b82f6" stroke-width="2"/>
  <text x="400" y="578" font-family="Arial, sans-serif" font-size="14" fill="#ffffff" text-anchor="middle" font-weight="bold">
    ğŸ’¡ Lesson: Always define specific routes BEFORE generic routes with path parameters
  </text>
</svg>